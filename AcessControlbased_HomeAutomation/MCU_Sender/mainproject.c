/*
 * mainproject.c
 *
 * Created: 22/9/2019 1:15:49 PM
 *  Author: Ali
 */ 
#include "mainproject.h"
uint8 key,Ack;
uint8 x=0;
//**************************************************************************************************************************************************
//**************************************************************************************************************************************************
//**************************************************************************************************************************************************
void inti_of_program()//the LCD going to ask for password for true password type 2333.
{
	if(Ack=='S')
	{
		if(x==0)
		{
		LCD_cls();
		LCD_goToRowColumn(0,0);
		LCD_string("Enter password");
		LCD_goToRowColumn(1,0);
		}
		x++;
		key = KeyPad_getPressedKey();
		delaycounter();
		UART_sendbyte(key);
		if((key >= '0') && (key <= '9'))
		{
			LCD_sendData(key);
			if(x==4)
			{
				x=0;
			}
		}
	}
	
}
//**************************************************************************************************************************************************
//**************************************************************************************************************************************************
//**************************************************************************************************************************************************void true_password()//will enter this function when the password is true by receive 2 ON UDR.
void true_password()
{	  if (Ack=='C')
	 {   LCD_cls();
		LCD_goToRowColumn(0,0);
		 LCD_string("Correct password");
	 }
}
//**************************************************************************************************************************************************
//**************************************************************************************************************************************************
//**************************************************************************************************************************************************
void false_password()//will enter this function when password is wrong by receive 3 on UDR/"n".
{
	if (Ack=='W')
	{
		LCD_cls();
		LCD_goToRowColumn(0,0);
		LCD_string("Wrong Password");
		_delay_ms(5000);
	}
}
//**************************************************************************************************************************************************
//**************************************************************************************************************************************************
//**************************************************************************************************************************************************void reset_a_3times()//if user enter password 3 times wrong the system just stop and cant accept any thing from keypad by receive 4 on UDR/"n".
reset_a_3times()
{
	  if (Ack=='Q')
	  {
		  LCD_cls();
		  LCD_goToRowColumn(0,0);
		  LCD_string("Wrong Password ");
		  LCD_goToRowColumn(1,2);
		  LCD_string("!! CLOSED !! ");
		  LCD_cls();
	  }	
}

//**************************************************************************************************************************************************